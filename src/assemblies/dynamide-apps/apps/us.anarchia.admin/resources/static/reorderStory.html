<HTML>
  <HEAD>
    <TITLE>Reorder Story</TITLE>
    <script src="/anarchia-admin/js/jquery-2.1.3.min.js"></script>
    <script src="/anarchia-admin/js/reorderStory.js"></script>
    
    <script src="js/handlebars-v3.0.0.js"></script>
    <script src="js/jquery-2.1.3.min.js"></script>
    <link  href="js/jquery-ui/ui/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script src="js/jquery-ui/ui/minified/jquery-ui.min.js"></script>
    <script src="js/jquery-ui-touch-punch.js"></script>
    
    <style>
    .up {
        text-decoration: none;   
    }
    .down {
        text-decoration: none;   
    }
    .thumbnail {
        height: 100px;
        width: 100px; 
    }
    </style>
    
    
  </HEAD>
  <BODY id="page1" bottomMargin="15" leftMargin="10" topMargin="15" rightMargin="10" name="addPanel">
    <P>Reorder Story</P>
      <input type='button' id="showRowsBtn" value="Show Rows">
    
    <div id='panelDiv'>panel here</div>
    
    <script id="TemplateSource" type="text/x-handlebars-template">
    <table id='storyOrderTable' border='1'>
    {{#each panelsArray}}
    
    <tr>
        <td>
            <a href="#" class="up">&#x25B2;</a><br />
            <a href="#" class="down">&#x25BC;</a>
        </td>
        <td>
        <img src="{{img}}" class="thumbnail"/>
        </td>
        <td class='storyID'><a href="#{{id}}">id</a></td>
        <td class='storyIndex'>{{@index}}</td>
        
    </tr>
    {{/each}}
    </table>
    </script>
  </BODY>
  <script>
    var source = document.getElementById('TemplateSource').innerHTML
    var templateFn = Handlebars.compile(source);
    function renderTemplate(data){
        if (data){
            $('#panelDiv').html(templateFn({panelsArray: data}));
        }
        $(".up,.down").click(function(){
            var row = $(this).parents("tr:first");
            if ($(this).is(".up")) {
                row.insertBefore(row.prev());
            } else {
                row.insertAfter(row.next());
            }
            row.fadeOut(200).fadeIn(200);
        });
        
    }
    
    
  </script>
</HTML>
