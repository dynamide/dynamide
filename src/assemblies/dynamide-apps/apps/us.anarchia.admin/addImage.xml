<?xml version="1.0"?>
<!DOCTYPE dynamideForm>
<dynamideForm>
    <event language="beanshell" name="addImage_onAction"><![CDATA[
        try {
            String IMAGES_DIR = "/Users/vcrocla/tmp/anarchia/imagerepo";

            File f = session.getUploadedFile("file", IMAGES_DIR);
                    
            event.returnSource("<html><body>uploaded: "+f+"</body></html>");
            return;
        } catch (Exception e){
            event.returnSource("ERROR calling getUploadedFile: "+e+" stack trace: "+Tools.getStackTrace(e));
            return;
        }
    ]]>
    </event>
  <widgets>
    <widget id="session1">
      <properties>
        <property name="type">
          <value>com.dynamide.session</value>
        </property>
      </properties>
    </widget>
    <widget id="hiddenPageID">
      <properties>
        <property name="field">
          <value>page</value>
        </property>
        <property name="type">
          <value>com.dynamide.hidden</value>
        </property>
        <property name="value">
          <datatype>com.dynamide.datatypes.WebmacroDatatype</datatype>
          <value>$pageID</value>
        </property>
      </properties>
    </widget>
    <widget id="img">
      <properties>
        <property name="caption">
          <value>Image URL</value>
        </property>
        <property name="captionClass">
          <value>caption</value>
        </property>
        <property name="captionWidth">
          <value>180</value>
        </property>
        <property name="name">
          <value>img</value>
        </property>
        <property name="type">
          <value>com.dynamide.edit</value>
        </property>
        <property name="textSize">
          <value>50</value>
        </property>
        <property name="cellpadding">
          <value>5</value>
        </property>
      </properties>
    </widget>
    <widget id="caption">
      <properties>
        <property name="caption">
          <value>Caption</value>
        </property>
        <property name="captionClass">
          <value>caption</value>
        </property>
        <property name="captionWidth">
          <value>180</value>
        </property>
        <property name="name">
          <value>panelCaption</value>
        </property>
        <property name="type">
          <value>com.dynamide.edit</value>
        </property>
        <property name="textSize">
          <value>50</value>
        </property>
        <property name="cellpadding">
          <value>5</value>
        </property>
      </properties>
    </widget>
    <widget id="title">
      <properties>
        <property name="caption">
          <value>Title</value>
        </property>
        <property name="captionClass">
          <value>caption</value>
        </property>
        <property name="captionWidth">
          <value>180</value>
        </property>
        <property name="name">
          <value>title</value>
        </property>
        <property name="type">
          <value>com.dynamide.edit</value>
        </property>
        <property name="textSize">
          <value>50</value>
        </property>
        <property name="cellpadding">
          <value>5</value>
        </property>
      </properties>
    </widget>
    <widget id="author">
      <properties>
        <property name="caption">
          <value>Author</value>
        </property>
        <property name="captionClass">
          <value>caption</value>
        </property>
        <property name="captionWidth">
          <value>180</value>
        </property>
        <property name="name">
          <value>author</value>
        </property>
        <property name="type">
          <value>com.dynamide.edit</value>
        </property>
        <property name="textSize">
          <value>50</value>
        </property>
        <property name="cellpadding">
          <value>5</value>
        </property>
      </properties>
    </widget>
    <widget id="nextid">
      <properties>
        <property name="caption">
          <value>NextID</value>
        </property>
        <property name="captionClass">
          <value>caption</value>
        </property>
        <property name="captionWidth">
          <value>180</value>
        </property>
        <property name="name">
          <value>nextid</value>
        </property>
        <property name="type">
          <value>com.dynamide.edit</value>
        </property>
        <property name="textSize">
          <value>50</value>
        </property>
        <property name="cellpadding">
          <value>5</value>
        </property>
      </properties>
    </widget>
    
    <widget id="submit1">
      <properties>
        <property name="action">
          <value>doSubmitThing</value>
        </property>
        <property name="caption">
          <value>Submit</value>
        </property>
        <property name="captionWidth">
          <value>180</value>
        </property>
        <property name="cellpadding">
          <value>5</value>
        </property>
        <property name="type">
          <value>com.dynamide.submit</value>
        </property>
      </properties>
    </widget>
  </widgets>
  <htmlsrc browser="*"><![CDATA[
<HTML>
  <HEAD>
    <TITLE>$page.title</TITLE>
    <script src="/anarchia/js/jquery-2.1.3.min.js"></script>
    <script src="/anarchia/js/anarchia.js"></script>
  </HEAD>
  <BODY id="page1" bottomMargin="15" leftMargin="10" topMargin="15" rightMargin="10" name="addPanel">
    <P>Add Panel v2</P>
    <FORM name="form$pageID" method="POST" action="$session.applicationURI" enctype="multipart/form-data">
      File 1: <input TYPE="file" NAME="file"/>
      <br />
      <input TYPE="submit" NAME="Submit" VALUE="Submit Form"/>
      <SPAN class="widget" id="hiddenPageID"/>
      <SPAN class="widget" id="author"/>
      <SPAN class="widget" id="img"/>
      <SPAN class="widget" id="caption"/>
      <SPAN class="widget" id="title"/>
      <SPAN class="widget" id="nextid"/>
      <SPAN class="widget" id="submit1"/>
    </FORM>
  </BODY>
  <script>
    function onNextID(id)\{
        console.log("onNextID: "+id);
        \$('\#addPanel_nextid').val(id);
    \}
    \$(document).ready(function()\{
       getNextID('panels', onNextID);
    \});
    </script>
</HTML>
]]></htmlsrc>
  <properties>
    <property name="formAction">
      <value>mojoAction</value>
    </property>
    <property name="formName">
      <value></value>
    </property>
    <property name="name">
      <readOnly>true</readOnly>
      <value>addPanel</value>
    </property>
    <property name="title">
      <value>Add Panel</value>
    </property>
    <property name="type">
      <readOnly>true</readOnly>
      <value>pagetypes/com.dynamide.page</value>
    </property>
  </properties>
</dynamideForm>